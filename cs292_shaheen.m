
format longG;

matOrg=[
    
%ID,N,p,np,initTime,CompTime,TotTime,MaxPrime,PrimeCount
3,50000000,7071,16,0.310556,844.459,844.769,49999991,3001134
3,50000000,7071,4,1.24178,11799.1,11800.3,49999991,3001134
3,50000000,7071,2,2.48339,45776.1,45778.5,49999991,3001134
3,50000000,7071,32,0.155345,249.63,249.785,49999991,3001134
3,50000000,7071,8,0.620969,3094.19,3094.81,49999991,3001134

3,10000000,3162,16,0.0625904,43.5269,43.5895,9999991,664579
3,10000000,3162,4,0.249993,503.137,503.387,9999991,664579
3,10000000,3162,2,0.499841,1881.6,1882.1,9999991,664579
3,10000000,3162,32,0.0313439,15.2829,15.3143,9999991,664579
3,10000000,3162,8,0.125063,141.094,141.219,9999991,664579

3,25000000,5000,2,1.24178,11531.1,11532.3,24999983,1565927
3,25000000,5000,32,0.0777314,72.5748,72.6525,24999983,1565927
3,25000000,5000,8,0.310556,805.814,806.124,24999983,1565927
3,25000000,5000,16,0.155344,229.563,229.718,24999983,1565927
3,25000000,5000,4,0.620968,3008.16,3008.78,24999983,1565927

3,100000000,10000,16,0.620969,3194.66,3195.28,99999989,5761455
3,100000000,10000,4,2.4834,46636.7,46639.2,99999989,5761455
3,100000000,10000,32,0.310556,895.898,896.209,99999989,5761455
3,100000000,10000,8,1.24178,12055.7,12057,99999989,5761455

3,100000000,10000,2,1.24178,12055.7,12057,99999989,5761455 %FAKE

3,250000000,15811,16,1.54459,19119.3,19120.9,249999991,13679318
3,250000000,15811,32,0.772377,5111.31,5112.09,249999991,13679318
3,250000000,15811,8,3.089,73821.6,73824.7,249999991,13679318

3,250000000,15811,4,3.089,73821.6,73824.7,249999991,13679318 % FAKE
3,250000000,15811,2,3.089,73821.6,73824.7,249999991,13679318 % FAKE
];


mat=sortrows(matOrg,4)

[r,c]=size(mat);

% plotCompareMethods(mat);
xcolumn=2;
ycolumn=7;

npcount=8;
%x=[2 4 8 16 32];
x=[8 16 32];

series=0;
speedup=zeros(3,5);
efficiency=zeros(3,5);
temp=0;
%{
% for each series
t1 = [8 8 8 8 8];
for i = [10000000 25000000 50000000 100000000 250000000]
    series=series+1;
    k=1;
    for j=1:r
        if mat(j,xcolumn)==i 
             if k==3
                temp = mat(j,ycolumn); 
             end
             if (k > 2) 
                speedup(k-2,series)=temp/mat(j,ycolumn);
                efficiency(k-2,series)=speedup(k-2,series)*t1(series)/mat(j,4);
             end
             k=k+1;
        end
    end

end
%}

x=[2 4 8 16 32];
t1 = [2 2 2 2 2];
for i = [10000000 25000000 50000000] % 100000000 250000000]
    series=series+1;
    k=1;
    for j=1:r
        if mat(j,xcolumn)==i 
             if k==1
                temp = mat(j,ycolumn); 
             end
                speedup(k,series)=temp/mat(j,ycolumn);
                efficiency(k,series)=speedup(k,series)*t1(series)/mat(j,4);

             k=k+1;
        end
    end

end

%{ %}

    
% speedup
figure (7);
plot(x,speedup(:,1),x,speedup(:,2),x,speedup(:,3));%,x,speedup(:,4),x,speedup(:,5));
legend('10M', '25M', '50M', '100M', '250M');
title('Speedup vs. Number of Processors for different N');
xlabel('Number of Processors');
ylabel('Speedup');
grid on;

% efficiency
figure (8);
plot(x,efficiency(:,1),x,efficiency(:,2),x,efficiency(:,3));%,x,efficiency(:,4),x,efficiency(:,5));
legend('10M', '25M', '50M', '100M', '250M');
title('Efficiency vs. Number of Processors for different N');
xlabel('Number of Processors');
ylabel('Efficiency');
grid on;
